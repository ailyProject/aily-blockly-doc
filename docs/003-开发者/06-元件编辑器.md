# 元件编辑器 (Component Editor) 使用文档
`内测中`
元件编辑器是一个用于创建和编辑自定义电子元件的可视化工具。通过它，你可以定义元件的外观、引脚布局、功能块以及相关属性，并将其导出为 JSON 配置文件供模拟器使用。

## 1. 界面概览

编辑器界面主要分为以下几个区域：

### 1.1 顶部工具栏 (Header)
位于界面顶部，提供全局设置和文件操作功能：
*   **Snap (吸附)**: 开启/关闭网格吸附功能。开启后，拖拽元素会自动对齐到网格。
*   **Grid Size (网格大小)**: 设置网格的像素大小（仅在开启 Snap 时有效）。
*   **Zoom (缩放)**: 控制画布的缩放比例。
    *   `+` / `-`: 放大/缩小。
    *   `Reset`: 重置缩放比例为 100%。
*   **Import (导入)**: 导入现有的元件配置文件 (`.json`)。
*   **Export (导出)**: 将当前编辑的元件导出为 JSON 配置文件。
*   **Preview (预览)**: 在新窗口中打开元件预览器，查看元件在模拟器中的实际渲染效果。

### 1.2 左侧工具栏 (Left Sider)
提供添加各类元素的快捷按钮：
*   **Add Image**: 添加图片。支持上传本地图片，会自动压缩并转换为 WebP 格式。
*   **Add Pin**: 添加引脚 (Pin)。
*   **Add Function**: 为当前选中的引脚添加功能块 (Function)。
*   **Add Text**: 添加文本标签。

### 1.3 画布区域 (Canvas)
位于界面中央，是编辑元件的主要工作区。
*   显示元件的 Base Frame（基础边框）、图片、引脚、功能块和文本。
*   支持网格背景显示（当 Snap 开启时）。
*   点击空白处并拖动可以移动画布视野。

### 1.4 右侧面板 (Properties & Element List)
包含两个部分：
*   **Element List (元件列表)**: 显示当前元件包含的所有元素层级结构。
    *   可以查看、选择、删除元素。
    *   可以锁定/解锁元素位置。
    *   支持拖拽调整引脚和功能块的顺序。
*   **Properties Editor (属性编辑器)**: 显示并编辑当前选中元素的详细属性。

### 1.5 底部面板 (Bottom Sider)
*   **Legend (图例)**: 显示当前定义的功能类型及其颜色。
*   **Editor (类型编辑)**: 点击编辑按钮，可以自定义功能类型（Label, Value, Color, Text Color）。

---

## 2. 基本操作

### 2.1 添加元素
*   **图片**: 点击左侧 "Add Image" 按钮，选择本地图片文件。图片会自动居中放置。
*   **引脚**: 点击 "Add Pin" 按钮，在默认位置添加一个新的引脚。
*   **功能块**: 选中一个引脚后，点击 "Add Function" 按钮，为该引脚添加一个功能定义块。
*   **文本**: 点击 "Add Text" 按钮，添加一个文本标签。

### 2.2 选择与移动
*   **选择**: 点击画布上的元素或右侧列表中的项目进行选择。点击画布空白处选择整个元件 (Base Frame)。
*   **移动**: 选中元素后，按住鼠标左键拖动。
    *   如果开启了 Snap，移动时会自动吸附到网格。
    *   功能块 (Function) 的位置是相对于其所属引脚 (Pin) 的，移动功能块实际上是调整其标签的相对偏移。

### 2.3 调整大小
*   **元件尺寸**: 选中元件 (Base Frame)，在属性面板中修改 Width/Height，或直接拖拽画布中元件的右下角（需确认是否支持拖拽调整）。
*   **图片**: 选中图片，拖拽图片周围的调整手柄（通常是右下角），或在属性面板中精确输入尺寸。

### 2.4 删除元素
*   在右侧 **Element List** 面板中，找到要删除的元素，点击右侧的 **垃圾桶图标**。

### 2.5 锁定/解锁
*   在 **Element List** 面板中，点击元素右侧的 **锁图标**。
*   锁定后的元素无法被拖拽移动，防止误操作。

### 2.6 排序
*   在 **Element List** 面板中，拖拽引脚 (Pin) 或功能块 (Function) 项目，可以调整它们的显示顺序。

---

## 3. 快捷键操作

| 按键 | 功能 | 说明 |
| :--- | :--- | :--- |
| **Arrow Keys (方向键)** | 微调位置 | 选中元素后，按 `↑` `↓` `←` `→` 移动 0.5px |
| **Shift + Arrow Keys** | 快速微调 | 选中元素后，按住 `Shift` + 方向键移动 5px |
| **Mouse Wheel (滚轮)** | 缩放画布 | 向上滚动放大，向下滚动缩小 (10% - 300%) |

---

## 4. 属性详解

### Component (元件)
*   **Name**: 元件名称。
*   **Width/Height**: 元件的基础尺寸 (cm 或 px)。

### Pin (引脚)
*   **ID**: 引脚的唯一标识符。
*   **Layout**: 功能块的排列方向 (Horizontal/Vertical)。
*   **Line Type**: 连接线样式 (Solid/Dashed)。
*   **Line Algorithm**: 连接线路径算法 (Direct/Bezier/Orthogonal)。

### Function (功能块)
*   **Name**: 功能块显示的名称。
*   **Type**: 功能类型（如 Digital, Analog, VCC, GND 等），决定了显示的颜色。

### Text (文本)
*   **Content**: 文本内容。
*   **Font Size**: 字体大小。
*   **Color**: 字体颜色。
