# コンポーネントエディター使用ドキュメント
`ベータテスト中`
コンポーネントエディターは、カスタム電子部品を作成および編集するためのビジュアルツールです。これを使用して、コンポーネントの外観、ピンレイアウト、機能ブロック、および関連プロパティを定義し、シミュレーターで使用するためにJSON設定ファイルとしてエクスポートできます。

## 1. インターフェース概要

エディターインターフェースは主に以下の領域に分かれています：

### 1.1 上部ツールバー（Header）
インターフェースの上部にあり、グローバル設定とファイル操作機能を提供します：
*   **Snap（スナップ）**: グリッドスナップ機能のオン/オフ。オンにすると、要素をドラッグするときに自動的にグリッドに整列します。
*   **Grid Size（グリッドサイズ）**: グリッドのピクセルサイズを設定（Snapが有効な場合のみ有効）。
*   **Zoom（ズーム）**: キャンバスのズーム比率を制御。
    *   `+` / `-`: ズームイン/ズームアウト。
    *   `Reset`: ズーム比率を100%にリセット。
*   **Import（インポート）**: 既存のコンポーネント設定ファイル（`.json`）をインポート。
*   **Export（エクスポート）**: 現在編集中のコンポーネントをJSON設定ファイルとしてエクスポート。
*   **Preview（プレビュー）**: 新しいウィンドウでコンポーネントプレビューアを開き、シミュレーターでのコンポーネントの実際のレンダリング効果を確認。

### 1.2 左側ツールバー（Left Sider）
さまざまな要素を追加するためのショートカットボタンを提供：
*   **Add Image**: 画像を追加。ローカル画像のアップロードをサポートし、自動的に圧縮してWebP形式に変換します。
*   **Add Pin**: ピンを追加。
*   **Add Function**: 現在選択されているピンに機能ブロックを追加。
*   **Add Text**: テキストラベルを追加。

### 1.3 キャンバス領域（Canvas）
インターフェースの中央にあり、コンポーネントを編集するための主な作業領域です。
*   コンポーネントのベースフレーム、画像、ピン、機能ブロック、テキストを表示。
*   グリッド背景表示をサポート（Snapがオンの場合）。
*   空白をクリックしてドラッグすると、キャンバスビューを移動できます。

### 1.4 右側パネル（Properties & Element List）
2つの部分を含みます：
*   **Element List（要素リスト）**: 現在のコンポーネントに含まれるすべての要素の階層構造を表示。
    *   要素の表示、選択、削除が可能。
    *   要素の位置をロック/アンロックできます。
    *   ピンと機能ブロックの順序をドラッグして調整できます。
*   **Properties Editor（プロパティエディター）**: 現在選択されている要素の詳細プロパティを表示および編集。

### 1.5 下部パネル（Bottom Sider）
*   **Legend（凡例）**: 現在定義されている機能タイプとその色を表示。
*   **Editor（タイプ編集）**: 編集ボタンをクリックして、機能タイプ（Label、Value、Color、Text Color）をカスタマイズできます。

---

## 2. 基本操作

### 2.1 要素の追加
*   **画像**: 左側の「Add Image」ボタンをクリックし、ローカル画像ファイルを選択。画像は自動的に中央に配置されます。
*   **ピン**: 「Add Pin」ボタンをクリックして、デフォルトの位置に新しいピンを追加。
*   **機能ブロック**: ピンを選択した後、「Add Function」ボタンをクリックして、そのピンに機能定義ブロックを追加。
*   **テキスト**: 「Add Text」ボタンをクリックして、テキストラベルを追加。

### 2.2 選択と移動
*   **選択**: キャンバス上の要素または右側リストの項目をクリックして選択。キャンバスの空白をクリックすると、コンポーネント全体（ベースフレーム）を選択。
*   **移動**: 要素を選択した後、マウスの左ボタンを押したままドラッグ。
    *   Snapがオンの場合、移動時に自動的にグリッドにスナップします。
    *   機能ブロックの位置は所属するピンに対して相対的で、機能ブロックを移動すると実際にはラベルの相対オフセットが調整されます。

### 2.3 サイズ調整
*   **コンポーネントサイズ**: コンポーネント（ベースフレーム）を選択し、プロパティパネルでWidth/Heightを変更。
*   **画像**: 画像を選択し、画像周囲の調整ハンドル（通常は右下）をドラッグするか、プロパティパネルで正確なサイズを入力。

### 2.4 要素の削除
*   右側の **Element List** パネルで、削除する要素を見つけ、右側の **ゴミ箱アイコン** をクリック。

### 2.5 ロック/アンロック
*   **Element List** パネルで、要素の右側にある **ロックアイコン** をクリック。
*   ロックされた要素はドラッグ移動できなくなり、誤操作を防ぎます。

### 2.6 並べ替え
*   **Element List** パネルで、ピン（Pin）または機能ブロック（Function）の項目をドラッグして、表示順序を調整できます。

---

## 3. ショートカット操作

| キー | 機能 | 説明 |
| :--- | :--- | :--- |
| **方向キー** | 位置の微調整 | 要素を選択した後、`↑` `↓` `←` `→` で0.5px移動 |
| **Shift + 方向キー** | クイック微調整 | 要素を選択した後、`Shift` + 方向キーで5px移動 |
| **マウスホイール** | キャンバスズーム | 上スクロールでズームイン、下スクロールでズームアウト（10% - 300%） |

---

## 4. プロパティ詳細

### Component（コンポーネント）
*   **Name**: コンポーネント名。
*   **Width/Height**: コンポーネントの基本サイズ（cmまたはpx）。

### Pin（ピン）
*   **ID**: ピンの一意の識別子。
*   **Layout**: 機能ブロックの配置方向（Horizontal/Vertical）。
*   **Line Type**: 接続線スタイル（Solid/Dashed）。
*   **Line Algorithm**: 接続線パスアルゴリズム（Direct/Bezier/Orthogonal）。

### Function（機能ブロック）
*   **Name**: 機能ブロックの表示名。
*   **Type**: 機能タイプ（Digital、Analog、VCC、GNDなど）、表示色を決定。

### Text（テキスト）
*   **Content**: テキスト内容。
*   **Font Size**: フォントサイズ。
*   **Color**: フォント色。
