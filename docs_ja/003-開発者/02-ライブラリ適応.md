# ライブラリ適応 

## 開発とデバッグ方法  

### 開発者モードを開く
`メニュー > 設定 > 開発者モード`を通じて、開発者モードを開きます。このとき、blocklyワークスペースの左下にある`ライブラリ管理`ボタンの右側に🔁アイコンが表示されます。このアイコンは、ライブラリソースコードを変更した後、手動でライブラリをリロードするために使用されます。

### ライブラリのインストール
ライブラリテンプレートまたは自分で作成したライブラリを、コンピューターの任意の場所（例：`d:\lib-test`）に配置できます。
次に、aily blocklyでプロジェクトを開き、ターミナルを開いて入力します：
```
npm i d:\lib-test
```
これで、このプロジェクトにこのライブラリをインストールできます。

### ライブラリのリロード
`プロジェクト管理`の右側にある🔁アイコンをクリックすると、プロジェクトをリロードできます。リロード後、左側のメニューに新しいライブラリが表示されます。

### ライブラリの変更
プロジェクトディレクトリの`node_modules\@aily-project\<ライブラリ名>`を直接変更し、aily blocklyでリロードしてテストできます；
または`d:\lib-test`の元のライブラリを変更し、再度ライブラリをインストールしてテストすることもできます。

## ライブラリの提出 
まず、このプロジェクトを個人リポジトリにフォークできます。次に、新しく作成したライブラリをその中に配置し、Pull requestsを提出します。
Naihe colに連絡してマージするか、プロジェクトの他の管理者がマージするのを待ちます。  
マージが完了すると、npmリポジトリにプッシュされ、その後すべてのユーザーが開発したライブラリを使用できます。

## 多言語サポート  
ライブラリディレクトリの下にi18nディレクトリを追加して、ライブラリに多言語サポートを提供できます：
```
library-name  
 |- block.json             // aily blockly blockファイル
 |- generator.js           // aily blockly generatorファイル
 |- toolbox.json           // aily blockly toolboxファイル
 |- package.json           // npmパッケージ管理ファイル
 |- src.7z                 // Arduinoライブラリソースファイル、7z極限圧縮を使用してライブラリに配置してください
 |- readme.md              // 説明ファイル、オープンソースライブラリを使用している場合は説明してください
 |- i18n                   // 多言語サポート
     |- en.json            // 英語
     |- zh_cn.json         // 簡体字中国語
     |- zh_tw.json         // 繁体字中国語
     |- xxxx.json          // その他の言語
```
